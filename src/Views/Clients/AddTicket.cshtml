@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer _localizer
@{
	ViewData["Title"] = _localizer["Add Ticket"];
}
@using GoldenTicket.Models
@using GoldenTicket.Data
@model Ticket

<form method="post">
	<input asp-for="ClientId" type="hidden">

	<p>
		<label>
			<input asp-for="IsUrgent" type="checkbox" />
			<span>@_localizer["Urgent"]</span>
		</label>
	</p>

	<p>
		<label>
			<input asp-for="IsAbroad" type="checkbox" id="cbAbroad" value="true" onchange="abroadChange()" />
			<span>@_localizer["Abroad"]</span>
		</label>
	</p>

	<label id="country">@_localizer["Destination Country"]</label>
	@Html.DropDownListFor(model => model.Country, Countries.GetCountries(), new { @id = "myCountry", @onchange = "countryChange()" })

	<label>@_localizer["Destination Address"]</label>
	<input asp-for="Destination">

	<label>@_localizer["Destination Instituition"]</label>
	<input asp-for="Institution">

	<label>@_localizer["Contact Person on Site"]</label>
	<input asp-for="ContactPersonOnSite" multiline>

	<label>@_localizer["Reason of Travel"]</label>
	<input asp-for="Reason">

	<label>@_localizer["Start Date and Time"]</label>
	<input asp-for="StartDate">

	<label>@_localizer["End Date and Time"]</label>
	<input asp-for="EndDate">

	<label>@_localizer["Transportation"]</label>
	<input asp-for="Transportation">

	<label>@_localizer["Sources of Funding"]</label>
	<input asp-for="SourcesOfFunding" multiline>

	<label>@_localizer["Notes"]</label>
	<input asp-for="Notes" multiline>

	<br />

	<input class="btn" type="submit" value="@_localizer["Save"]">
</form>

<script>
	function countryChange() {
		var objSelect = document.getElementById("myCountry");
		if (objSelect.value === "Србија") {
			document.getElementById("cbAbroad").checked = false;
		}
		else {
			document.getElementById("cbAbroad").checked = true;
		}
	}

	function abroadChange() {
		var objSelect = document.getElementById("myCountry");
		if (!document.getElementById("cbAbroad").checked) {
			setSelectedValue(objSelect, "Србија");
		}
	}

	function setSelectedValue(selectObj, valueToSet) {
		for (var i = 0; i < selectObj.options.length; i++) {
			if (selectObj.options[i].text == valueToSet) {
				selectObj.options[i].selected = true;
				return;
			}
		}
	}
</script>